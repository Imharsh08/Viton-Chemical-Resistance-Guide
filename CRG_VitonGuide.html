<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <title>CRG: Chemical Resistance of Viton™ - Selection Guide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="viton_site.min.css" rel="stylesheet" type="text/css" />
    <link href="site-print.min.css" media="print" rel="stylesheet" type="text/css" />
    <style>
        body {
            font-family: 'Inter', Arial, sans-serif;
            background: #f4f6fa;
            margin: 0;
            color: #222;
        }
        .modern-header {
            background: #1a237e;
            color: #fff;
            padding: 0;
            box-shadow: 0 2px 8px rgba(30,40,80,0.07);
        }
        .modern-header .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
            height: 60px;
        }
        .modern-header .logo {
            font-size: 1.3rem;
            font-weight: 700;
            letter-spacing: 1px;
            color: #fff;
        }
        .modern-header .nav-links {
            display: none;
            gap: 32px;
        }
        .modern-header .nav-links a {
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            padding: 8px 16px;
            border-radius: 5px;
            transition: background 0.15s;
        }
        .modern-header .nav-links a.active, .modern-header .nav-links a:hover {
            background: #3949ab;
        }
        .main-flex {
            display: flex;
            gap: 32px;
            max-width: 1200px;
            margin: 40px auto 0 auto;
        }
        .card {
            background: #fff;
            border-radius: 14px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.08);
            padding: 32px 28px 28px 28px;
        }
        .left-col {
            flex: 1 1 340px;
            max-width: 360px;
            min-width: 260px;
            display: flex;
            flex-direction: column;
            align-items: stretch;
        }
        .right-col {
            flex: 2 1 600px;
            min-width: 320px;
        }
        h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #1a237e;
            margin-bottom: 24px;
            line-height: normal;
        }
        .search-label {
            font-size: 1.1rem;
            font-weight: 500;
            color: #3949ab;
            margin-bottom: 10px;
        }
        .search-input {
            width: -webkit-fill-available;
            padding: 10px 12px;
            font-size: 1rem;
            border: 1.5px solid #b0bec5;
            border-radius: 6px;
            background: #f9fafc;
            margin-bottom: 12px;
            transition: border 0.2s;
        }
        .search-input:focus {
            border-color: #3949ab;
            outline: none;
        }
        .search-select {
            width: 100%;
            min-height: 180px;
            font-size: 1rem;
            border: 1.5px solid #b0bec5;
            border-radius: 6px;
            background: #f9fafc;
            margin-bottom: 18px;
            transition: border 0.2s;
        }
        .note {
            font-size: 0.97rem;
            color: #3949ab;
            background: #e3e7f1;
            border-radius: 6px;
            padding: 10px 12px;
            margin-top: 10px;
        }
        .results-header th {
            font-size: 1.25rem;
            font-weight: 600;
            color: #26326a;
            margin-bottom: 18px;
           
        }
        .selected-chemical {
            color: #3949ab;
            font-size: 1.1rem;
            font-weight: 500;
            width: max-content;
        }
        .table-section {
            margin-bottom: 32px;
        }
        .table-section h3 {
            font-size: 1.1rem;
            color: #26326a;
            margin-bottom: 10px;
            font-weight: 600;
        }
        .format1 {
            width: 100%;
            border-collapse: collapse;
            background: #fafbfc;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(60,60,100,0.04);
            margin-bottom: 18px;
        }
        .format1 th, .format1 td {
            padding: 12px 10px;
            text-align: left;
        }
        .format1 th {
            background: #e3e7f1;
            color: #26326a;
            font-size: 1.05rem;
            font-weight: 600;
            border-bottom: 2px solid #c5cae9;
        }
        .format1 tr {
            transition: background 0.15s;
        }
        .format1 tbody tr:hover {
            background: #f1f3fa;
        }
        .format1 td {
            border-bottom: 1px solid #e0e4ef;
            font-size: 1rem;
        }
        .format1 tr:last-child td {
            border-bottom: none;
        }
        .rating-box {
            display: inline-block;
            min-width: 32px;
            padding: 2px 0;
            border-radius: 4px;
            font-weight: bold;
            font-size: 1rem;
            text-align: center;
            box-sizing: border-box;
        }
        .rating-1 { background: #00e676; color: #222; }
        .rating-2 { background: #29b6f6; color: #fff; }
        .rating-3 { background: #fff176; color: #222; }
        .rating-4 { background: #ef5350; color: #fff; }
        .rating-na { background: #e0e0e0; color: #757575; }
        .legend-section {
            margin-top: 32px;
            background: #f9fafc;
            border-radius: 8px;
            padding: 18px 18px 12px 18px;
            font-size: 1rem;
            color: #222;
            box-shadow: 0 2px 8px rgba(60,60,100,0.04);
        }
        .legend-section table {
            width: 100%;
        }
        .legend-section td.cell1 {
            width: 50px;
            border: 1px solid #b0bec5;
            font-weight: bold;
            text-align: center;
            border-radius: 4px;
        }
        .legend-section td.cell2 {
            padding-left: 5px;
            padding-right: 15px;
        }
        .footer-content {
            text-align: center;
            color: #757575;
            font-size: 0.95rem;
            margin: 32px 0 0 0;
        }
        .additional-data-button {
            width: 140px;
            height: 35px;
            background: #ff0000;
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
            
        }
        .additional-data-button:hover {
            background: #1a237e;
        }
        .info-button-icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>') no-repeat center;
            margin-right: 8px;
        }
        .viton-data-container {
            padding: 0;
            overflow-y: auto;
        }
        .viton-data {
            width: 100%;
            border-collapse: collapse;
            background: #fafbfc;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(60,60,100,0.04);
            margin: 0;
        }
        .viton-data caption {
            font-size: 1.1rem;
            font-weight: 600;
            color: #26326a;
            padding: 10px;
            background: #e3e7f1;
            border-bottom: 2px solid #c5cae9;
        }
        .viton-data th, .viton-data td {
            padding: 12px 10px;
            text-align: center;
            border: 1px solid #e0e4ef;
        }
        .viton-data th {
            background: #e3e7f1;
            color: #26326a;
            font-weight: 600;
        }
        .viton-data tr:hover {
            background: #f1f3fa;
        }
        .ui-dialog .ui-dialog-titlebar {
            background: #1a237e;
            color: #fff;
            font-size: 1.2rem;
            font-weight: 600;
            padding: 10px 15px;
            border: none;
            border-radius: 8px 8px 0 0;
        }
        .ui-dialog .ui-dialog-titlebar-close {
            background: none;
            border: none;
            width: 20px;
            height: 20px;
            margin: -10px 10px 0 0;
        }
        .ui-dialog .ui-dialog-titlebar-close .ui-icon-closethick {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>');
            background-position: center;
            background-size: 16px;
        }
        .ui-dialog .ui-dialog-buttonpane {
            background: #f9fafc;
            border-top: 1px solid #e0e4ef;
            padding: 10px;
            border-radius: 0 0 8px 8px;
        }
        .ui-dialog .ui-button {
            background: #3949ab;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
        }
        .ui-dialog .ui-button:hover {
            background: #1a237e;
        }
        .ui-resizable-handle {
            display: none; /* Hide resizable handles unless explicitly needed */
        }
        @media (max-width: 900px) {
            .main-flex {
                flex-direction: column;
                gap: 0;
                max-width: 98vw;
                padding: 8px 2vw;
            }
            .left-col, .right-col {
                max-width: 100vw;
                margin-bottom: 18px;
            }
            .viton-data th, .viton-data td {
                padding: 8px;
                font-size: 0.9rem;
            }
            .ui-dialog {
                width: 90vw !important;
                height: auto !important;
            }
        }
        @media (max-width: 600px) {
            .main-flex {
                padding: 2vw;
            }
            .left-col, .right-col {
                padding: 10px 4vw;
            }
            h1 {
                font-size: 1.2rem;
            }
            .format1 th, .format1 td {
                padding: 8px 4px;
                font-size: 0.95rem;
            }
            .search-select {
                height: 120px;
            }
            .additional-data-button {
                width: 120px;
                height: 30px;
                font-size: 0.9rem;
            }
            .viton-data th, .viton-data td {
                padding: 6px;
                font-size: 0.85rem;
            }
            .ui-dialog .ui-dialog-titlebar {
                font-size: 1rem;
            }
            .ui-dialog .ui-button {
                font-size: 0.9rem;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <header class="modern-header">
        <div class="nav-container">
            <div class="logo">Chemical Resistance Guide</div>
            <div class="nav-links">
                <a href="CRG_Home">Home</a>
                <a href="CRG_VitonGuide" class="active">Viton™ Guide</a>
                <a href="index.html">General Elastomer Guide</a>
                <a href="#">About</a>
                <a href="#">Contact</a>
            </div>
        </div>
    </header>
    <div class="main-flex">
        <div class="left-col card">
            <h1>General Chemical Resistance Guide</h1>
            <label class="search-label" for="txtChemicalSearch">Start typing a chemical name in the box below, or select from the list:</label>
            <input autocomplete="off" autocorrect="off" autofocus="true" class="search-input" id="txtChemicalSearch" maxlength="100" spellcheck="false" type="text" />
            <select class="search-select" id="ChemicalsList" size="15"></select>
            <div class="note">Ratings are at room temperature. For information on Viton™ products at other temperatures, refer to the Viton™ guide.</div>
        </div>
        <div class="right-col">
            <div class="results-header">
                <h2>Chemical Compatibility Results</h2>
                <table style="display: inline-block;" class= "center">
                    <thead>
                        <tr>
                            <th class="left">
                                <div class="selected-chemical">Select a chemical to view compatibility</div>
                            </th>
                            <th class="right"><button id="additionalDataButton" class="additional-data-button"><span class="info-button-icon"style="display: contents;"></span>Additional Data</button>
                            </th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div class="table-section">
                <h3>Chemours Elastomers</h3>
                <table id="chemoursTable" class="format1">
                    <thead>
                        <tr><th>Elastomer</th><th>Rating</th></tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="legend-section">
                <div style="font-weight:bold; margin-bottom: 8px;">Rating Legend</div>
                <table id="RatingLegend">
                    <tr>
                        <td class="cell1" style="background-color: #00e676; color: #222;">1</td>
                        <td class="cell2">Little to Minor Effect, 0 to 5% Volume Swell</td>
                    </tr>
                    <tr>
                        <td class="cell1" style="background-color: #29b6f6; color: #fff;">2</td>
                        <td class="cell2">Minor to Moderate Effect, 5 to 10% Volume Swell</td>
                    </tr>
                    <tr>
                        <td class="cell1" style="background-color: #fff176; color: #222;">3</td>
                        <td class="cell2">Moderate to Severe Effect, 10 to 20% Volume Swell</td>
                    </tr>
                    <tr>
                        <td class="cell1" style="background-color: #ef5350; color: #fff;">4</td>
                        <td class="cell2">Not Recommended</td>
                    </tr>
                    <tr>
                        <td class="cell1" style="background-color: #e0e0e0; color: #757575;">---</td>
                        <td class="cell2">No Data Available</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-content">
            <p>© 2023 Chemical Resistance Guide. All rights reserved Mangla Rubber Technologies.</p>
            <a href="https://www.chemours.com/en/privacy-policy" target="_blank">Privacy Policy</a> |
            <a href="https://www.chemours.com/en/terms-of-use" target="_blank">Terms of Use</a>
        </div>
    </footer>

    <!-- Hidden Additional Data Dialog -->
    <div id="additionalDataDialog" class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-front ui-dialog-buttons" tabindex="-1" role="dialog" style="display: none; width: max-content;">
        <div class="viton-data-container ui-dialog-content ui-widget-content" id="ui-id-9" >
            <table class="format1 viton-data">
                <caption><span class="caption1"></span></caption>
                <thead>
                    <tr>
                        <th rowspan="2">Temp</th>
                        <th rowspan="2">Time</th>
                        <th rowspan="2">Polymer</th>
                        <th rowspan="2">Grade</th>
                        <th colspan="2">Physical Properties % Retained</th>
                        <th rowspan="2">Hardness<br>Change</th>
                        <th rowspan="2">% swell</th>
                        <th rowspan="2">Comment</th>
                    </tr>
                    <tr>
                        <th>Tensile</th>
                        <th>Elongation</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix" style="position: absolute;height: auto;width: 800px;top: 298.5px;left: 223.5px;display: block;">
            <div class="ui-dialog-buttonset">
                <!-- <button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button">Close</button> -->
            </div>
        </div>
    </div>

    <script src="viton.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
    <script>
        // Elastomer groupings and display names with grade mappings
        const chemoursElastomers = [
            { key: "EETP", display: "Viton™ Extreme™ ETP", grade: "ETP-600S", polymer: "" },
            { key: "GFLT", display: "Viton™ GFLT", grade: "GFLT-600S", polymer: "" },
            { key: "GLT", display: "Viton™ GLT", grade: "GLT-600S", polymer: "" },
            { key: "FType", display: "F-type", grade: "GF-600S", polymer: "F" },
            { key: "BType", display: "B-type", grade: "GBL-600S", polymer: "B" },
            { key: "AType", display: "A-type", grade: "A-601C", polymer: "A" }
        ];

        const chemicalData = typeof db_viton_ratings !== 'undefined' ? db_viton_ratings : [];
        const chemicalNames = chemicalData.map(entry => entry.Chemical);

        // Map elastomer keys to display names
        const elastomerKeyMap = chemoursElastomers.reduce((map, e) => {
            map[e.key] = e.display;
            return map;
        }, {});

        function getRatingClass(val) {
            val = String(val);
            if (val === "1") return "rating-1";
            if (val === "2") return "rating-2";
            if (val === "3") return "rating-3";
            if (val === "4") return "rating-4";
            return "rating-na";
        }

        function getRatingDescription(rating) {
            switch (String(rating)) {
                case "1": return '1 - Little to Minor Effect: 0 to 5% Volume Swell';
                case "2": return '2 - Minor to Moderate Effect: 5 to 10% Volume Swell';
                case "3": return '3 - Moderate to Severe Effect: 10 to 20% Volume Swell';
                case "4": return '4 - Not Recommended';
                default: return '--- No Data Available';
            }
        }

        function renderChemicalList(filter = "") {
            const select = document.getElementById("ChemicalsList");
            select.innerHTML = "";
            const filtered = chemicalData.filter(entry =>
                entry.Chemical.toLowerCase().includes(filter.toLowerCase())
            );
            filtered.forEach(entry => {
                const opt = document.createElement("option");
                opt.value = entry.chemID;
                opt.textContent = entry.Chemical;
                select.appendChild(opt);
            });
        }
        renderChemicalList();

        // Autocomplete
        $(function() {
            $("#txtChemicalSearch").autocomplete({
                source: chemicalNames,
                minLength: 2,
                select: function(event, ui) {
                    $("#txtChemicalSearch").val(ui.item.value);
                    renderChemicalList(ui.item.value);
                    const select = document.getElementById("ChemicalsList");
                    if (select.options.length > 0) {
                        select.selectedIndex = 0;
                        select.dispatchEvent(new Event("change"));
                    }
                    return false;
                }
            });
        });

        // Filter list as you type
        $("#txtChemicalSearch").on("input", function(e) {
            renderChemicalList(this.value);
        });

        // Select first result on Enter
        $("#txtChemicalSearch").on("keydown", function(e) {
            if (e.key === "Enter") {
                const select = document.getElementById("ChemicalsList");
                if (select.options.length > 0) {
                    select.selectedIndex = 0;
                    select.dispatchEvent(new Event("change"));
                }
            }
        });

        // Initialize and show additional data dialog
        function showAddData(selected) {
            const dialog = $("#additionalDataDialog");
            const tbody = dialog.find("tbody");
            const caption = dialog.find(".caption1");
            tbody.empty();

            if (!selected || selected.Data != '1') {
                tbody.append("<tr><td colspan='9'>No additional data available for this chemical.</td></tr>");
                caption.text("No Data");
            } else {
                caption.text(`AMS 3023 - ${selected.Chemical}`);
                const additionalData = [
                    { temp: "175ºC", time: "70 hrs", polymer: selected.EETP, grade: "ETP-600S", tensile: 94, elongation: 99, hardness: -3, swell: 4, comment: "" },
                    { temp: "175ºC", time: "70 hrs", polymer: selected.GFLT, grade: "GFLT-600S", tensile: 102, elongation: 101, hardness: -3, swell: 8, comment: "" },
                    { temp: "175ºC", time: "70 hrs", polymer: selected.GLT, grade: "GLT-600S", tensile: 106, elongation: 97, hardness: -6, swell: 17, comment: "" },
                    { temp: "175ºC", time: "70 hrs", polymer: selected.FType, grade: "GF-600S", tensile: 92, elongation: 100, hardness: -5, swell: 6, comment: "" },
                    { temp: "175ºC", time: "70 hrs", polymer: selected.BType, grade: "GBL-600S", tensile: 96, elongation: 102, hardness: -5, swell: 13, comment: "" },
                    { temp: "175ºC", time: "70 hrs", polymer: selected.AType, grade: "A-601C", tensile: 84, elongation: 94, hardness: -10, swell: 19, comment: "" },
                    { temp: "200ºC", time: "70 hrs", polymer: selected.EETP, grade: "ETP-600S", tensile: 95, elongation: 99, hardness: 1, swell: 4, comment: "" },
                    { temp: "200ºC", time: "70 hrs", polymer: selected.GFLT, grade: "GFLT-600S", tensile: 100, elongation: 100, hardness: -1, swell: 7, comment: "" },
                    { temp: "200ºC", time: "70 hrs", polymer: selected.GLT, grade: "GLT-600S", tensile: 104, elongation: 94, hardness: -6, swell: 17, comment: "" },
                    { temp: "200ºC", time: "70 hrs", polymer: selected.FType, grade: "GF-600S", tensile: 94, elongation: 102, hardness: -3, swell: 6, comment: "" },
                    { temp: "200ºC", time: "70 hrs", polymer: selected.BType, grade: "GBL-600S", tensile: 86, elongation: 82, hardness: -4, swell: 13, comment: "" },
                    { temp: "200ºC", time: "70 hrs", polymer: selected.AType, grade: "A-601C", tensile: 74, elongation: 85, hardness: -10, swell: 18, comment: "" }
                ].filter(row => row.polymer !== undefined && row.polymer !== "---");

                additionalData.forEach(row => {
                    const tr = $("<tr>").appendTo(tbody);
                    $("<td>").text(row.temp).appendTo(tr);
                    $("<td>").text(row.time).appendTo(tr);
                    $("<td>").text(row.polymer).appendTo(tr);
                    $("<td>").text(row.grade).appendTo(tr);
                    $("<td>").text(row.tensile).appendTo(tr);
                    $("<td>").text(row.elongation).appendTo(tr);
                    $("<td>").text(row.hardness).appendTo(tr);
                    $("<td>").text(row.swell).appendTo(tr);
                    $("<td>").text(row.comment).appendTo(tr);
                });
            }

            dialog.dialog({
                resizable: false, // Disabled unless needed
                draggable: true,
                width: 800,
                height: 450,
                modal: true,
                buttons: {
                    Close: function() {
                        $(this).dialog("close");
                    }
                },
                close: function() {
                    tbody.empty();
                }
            }).dialog("open");
        }

        // Render results table
        function renderTables(selected) {
            const selectedChemicalDiv = document.querySelector(".selected-chemical");
            selectedChemicalDiv.textContent = selected ? selected.Chemical : "Select a chemical to view compatibility";

            const chemoursTbody = document.querySelector("#chemoursTable tbody");
            chemoursTbody.innerHTML = "";

            const additionalDataButton = document.getElementById("additionalDataButton");
            additionalDataButton.style.display = selected && selected.Data == '1' ? 'inline-flex' : 'none';

            if (!selected) return;

            // Generic function to create and append a row
            const createRow = (key, data) => {
                const row = document.createElement("tr");
                const elastomerCell = document.createElement("td");
                elastomerCell.textContent = elastomerKeyMap[key] || key;
                const ratingCell = document.createElement("td");
                const ratingSpan = document.createElement("span");
                let ratingValue = data[key];
                if (ratingValue === 0) ratingValue = "1";
                if (ratingValue === undefined || ratingValue === null || ratingValue === "") ratingValue = "---";
                ratingSpan.textContent = ratingValue;
                ratingSpan.className = getRatingClass(ratingValue) + " rating-box";
                ratingSpan.title = getRatingDescription(ratingValue);
                ratingCell.appendChild(ratingSpan);
                row.appendChild(elastomerCell);
                row.appendChild(ratingCell);
                return row;
            };

            chemoursElastomers.forEach(e => chemoursTbody.appendChild(createRow(e.key, selected)));

            // Attach click event to additional data button
            additionalDataButton.onclick = () => showAddData(selected);
        }

        // Show results when a chemical is selected
        $("#ChemicalsList").on("change", function() {
            const selected = chemicalData.find(e => e.chemID == this.value);
            console.log("Selected chemical data:", selected); // Debug: Check the selected object
            renderTables(selected);
        });

        // Handle page load
        window.addEventListener('DOMContentLoaded', () => {
            document.body.classList.add('loaded');
            const input = document.getElementById("txtChemicalSearch");
            const select = document.getElementById("ChemicalsList");
            if (input.value) {
                const matchingOption = Array.from(select.options).find(
                    option => option.textContent.toLowerCase() === input.value.toLowerCase()
                );
                if (matchingOption) {
                    matchingOption.selected = true;
                    select.dispatchEvent(new Event("change"));
                }
            }
        });
    </script>
</body>
</html>